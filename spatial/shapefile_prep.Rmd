---
title: "Shapefile prep"
output: html_document
---

**Shapefile downloaded from ESRI, created by David Smith, Readlands Univ.** 

https://univredlands.maps.arcgis.com/home/webmap/viewer.html?useExisting=1&layers=335a6b9b0f3248e7bf7d3938dafd62c4&layerId=0

```{r}
library(tidyverse)
library(sf)
library(here)
library(mapview)
library(mapedit)
library(leaflet)

```

##Creating polygons representing the motus

Read in the data and check it out
```{r}

tet_shore_a <- st_read(dsn = here("spatial/raw_data_"), layer = "shorelines2011")

mapview(tet_shore_a, zcol = "type") #Appears to be missing some of the lines?
```

Try the other data file that Dave sent

```{r}
tet_shore <- st_read(dsn = here("spatial/raw_data_"), layer = "shorelines2011_2")

mapview(tet_shore) #looks like the same

```

Still missing lines - try using `mapedit` to add lines

```{r}

#try the way I found online with editmap

tet_lines_miss <- mapview(tet_shore_2) %>%
  editMap("tet_shore_2")


```

Ok, weirdly when we open this in editMap it looks like all the lines are there - maybe if I just run lines to polygons it will work fine. Try that below:

```{r}

#use "st_polygonize"

# tet_motus <- st_polygonize(tet_shore)
# 
# mapview(tet_motus) 
# 
# #this did not work, try union:
# 
# tet_motus <- st_collection_extract(st_polygonize(st_union(tet_shore)))
# 
# mapview(tet_motus)

#another variation:

tet_motus <- st_cast(st_polygonize(st_union(tet_shore)))

mapview(tet_motus)

#yay this worked! #class is "sfc_polygon" "sfc"

```

Write out shapefile:
**note** this data has no info, may want to add island identifiers?

```{r}

st_write(tet_motus, "tet_motus.shp" ) #moved this to int folder

```


##Creating shapefiles for marine space

Next step is to create shapefiles representing marine space. 

1. lagoon area
2. 3 nautical miles in all directions from the outside of the motus

```{r}



```

