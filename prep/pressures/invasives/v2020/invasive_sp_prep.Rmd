---
title: "invasive_sp_prep"
output: html_document
---

#Summary 

For the invasive species pressure layer, we will take a very simple approach based on where invasive species exist. We know from the documentation provided by the Tetiaroa Society that there are 5 main invasive species groups they are trying to eradicate: rats, mosquito, biting flies, ants, and two introduced birds. We know which motus these have been successfully eliminated off of, so we can quantify which areas have which species. So a perfect score would be an area with 0 invasive species, and the lowest score would be an area with all the invasive species. Scores will be assigned by motu and then weighted by area of the motu. 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


library(tidyverse)
library(sf)
library(here)
library(janitor)

source(here('workflow/R/common.R'))

#file paths
goal     <- 'invasives'
scenario <- 'v2020'
dir_goal      <- file.path(here('prep/pressures',goal, scenario))
dir_goal_anx  <- file.path(dir_anx, goal, scenario)
dir_github    <- '~/github/tet-prep'

```

Read in data - this represents the best of my knowledge based on documents in the drop box Frank sent over. This version does not have the birds because I did not feel there was enough information on them to determine their extent and the damage they cause (i.e. are they really a pressure?)

```{r}

tet_is <- read_csv(file.path(dir_goal,"_raw_data/tet_invasives.csv")) %>% 
  clean_names() %>% 
  dplyr::select(name = motu, r_rattus = rats_1, r_exulans = rats_2, mosquitos,biting_midges, ants, total_invasives)


```

To score, we will divide the total invasive sum by the total possible number to normalize to a 0-1 

```{r}

tet_is_score <- tet_is %>% 
  mutate(
    score = total_invasives/5
  ) %>%
  dplyr::select(name,score) %>% 
  inner_join(.,tet_motus, by = "name") %>% 
  mutate(
    weighted_sco = weighted.mean(score,area_km2)
  ) %>% 
  summarize(
    status = unique(weighted_sco)
  )%>% 
  mutate(
    year = 2020,
    region_id = 1
  )


```

Write this draft layer to int folder for now
```{r}
#to output
write_csv(tet_is_score, file.path(dir_goal,"output/sp_alien.csv"))

#to toolboxy

write_csv(tet_is_score, file = "~/github/tet-scores/region/layers/sp_alient.csv", row.names = FALSE)

```

